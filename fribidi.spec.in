# This spec file creates three packages:
#
#	Everything:
#		(this is equivalent to two others together)
#			fribidi-version-release-arch.rpm
#	Runtime material: Shared library and command line tool
#			libfribidi-version-release-arch.rpm
#	Development material: Static library and header files
#		(requires libfribidi)
#			libfribidi-devel-version-release-arch.rpm

%define name @PACKAGE@
%define ver @VERSION@
%define rel @SPECRELEASE@

%define prefix %{_prefix}

Name: %{name}
Version: %{ver}
Release: %{rel}
Copyright: LGPL
Source: http://telia.dl.sourceforge.net/fribidi/%{name}-%{ver}.tar.gz
URL: http://fribidi.sourceforge.net/
BuildRoot: %{_tmppath}/%{name}

Summary: Library implementing the Unicode Bidirectional Algorithm
Group: System/Libraries
Provides: libfribidi
Provides: libfribidi-devel
%description
A library to handle bidirectional scripts (eg. hebrew, arabic), so that
the display is done in the proper way; while the text data itself is
always written in logical order.

Install %{name} if you want to run or develop programs that use %{name}.


%package -n lib%{name}
Summary: Library implementing the Unicode Bidirectional Algorithm
Group: System/Libraries
Conflicts: lib%{name}-devel < %{ver}
Conflicts: lib%{name}-devel > %{ver}
%description -n lib%{name}
The lib%{name} package includes the shared libraries for the %{name} package.

Install lib%{name} if you want to run programs which use %{name}.


%package -n lib%{name}-devel
Summary: Library implementing the Unicode Bidirectional Algorithm
Group: Development/C
Requires: lib%{name} = %{ver}
%description -n lib%{name}-devel
The lib%{name}-devel package includes the static libraries and header files
for the %{name} package.

Install lib%{name}-devel if you want to develop programs which will use
%{name}.


%prep
%setup

%build
if [ ! -x ./configure ];then 
./bootstrap
fi
./configure %{_target_platform}
make CFLAGS="$RPM_OPT_FLAGS"

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT%{prefix}
make install


%clean
rm -rf $RPM_BUILD_ROOT

%post -p /sbin/ldconfig
%postun -p /sbin/ldconfig

%post -n lib%{name} -p /sbin/ldconfig
%postun -n lib%{name} -p /sbin/ldconfig

%files
%defattr(-,root,root)
%doc README AUTHORS COPYING ChangeLog TODO THANKS NEWS
%{_bindir}/%{name}
%{_bindir}/%{name}-config
%{_libdir}/*.so.*
%{_libdir}/pkgconfig/%{name}.pc
%{_libdir}/*.a
%{_libdir}/*.la
%{_libdir}/*.so
%{_includedir}/*

%files -n lib%{name}
%defattr(-, root, root)
%doc README AUTHORS COPYING ChangeLog TODO THANKS NEWS
%{_bindir}/%{name}
%{_bindir}/%{name}-config
%{_libdir}/*.so.*
%{_libdir}/pkgconfig/%{name}.pc

%files -n lib%{name}-devel
%defattr(-, root, root)
%{_libdir}/*.a
%{_libdir}/*.la
%{_libdir}/*.so
%{_includedir}/*


%changelog

* Wed Jan  9 2002  Behdad Esfahbod <behdad@bamdad.org>
- First spec released.
